version: 2

models:
    - name: stg_redshift_rxcompanion__subscriber_permanent_optout
      description: Represents subscribers that have permanently opted out of our programs
      columns:
          - name: card_id
            description: Client-generated id specific to a member under a card name.
            tests:
              - not_null

          - name: card_name
            description: Internally-generated id to differentiate sponsor's customers.
            tests:
              - not_null

          - name: permanent_optout_date
            description: Date patient added to permanent optout list.
            tests:
              - not_null

          - name: program_type
            description: Which program patient opted out of permanently.
            tests:
              - not_null

      tests:
        - dbt_expectations.expect_compound_columns_to_be_unique:
            column_list: [ "card_name", "card_id", "program_type"]